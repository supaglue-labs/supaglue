import BrowserWindow from '@site/src/components/BrowserWindow';
import ThemedImage from '@theme/ThemedImage';

# Build an integration card

![code](https://img.shields.io/badge/Code%20Tutorial-0000a5)

This tutorial will show how to build a Salesforce card in your frontend web app for customers to connect their Salesforce account to your application using Supaglue.

export const IntegrationCard = ({ icon, provider, description, to, cta = 'Connect' }) => (
  <div className="mb-4 p-6 max-w-sm flex flex-col border rounded-md border-slate-200 border-solid items-start">
    <img src={icon} style={{ width: 'auto', height: '36px' }} />
    <div className="font-semibold mt-4">{provider}</div>
    <div className="text-xs mt-2">{description}</div>
    <div
      onClick={() => {
        window.location.href = to;
      }}
      className="border-solid font-semibold cursor-pointer hover:bg-slate-100 mt-6 px-4 py-2 border border-slate-300 rounded-md text-xs"
    >
      {cta}
    </div>
  </div>
);

<IntegrationCard
  icon="/img/salesforce.svg"
  provider="Salesforce"
  description="Sync your leads in and out of Salesforce"
  to="#"
/>

## Prerequisites

This tutorial assumes you have gone through Supaglue's [Quickstart](../quickstart) and will use the following technologies:

- Typescript
- Nextjs 13
- Tailwind css

## Build a Nextjs IntegrationCard component

```jsx
// components/IntegrationCard.jsx

const IntegrationCard = ({
  icon,
  provider,
  description,
  to,
  cta = 'Connect',
}: {
  icon: ReactNode,
  provider: string,
  description: string,
  to: string,
  cta?: string,
}) => (
  <div className="mb-4 p-6 max-w-sm flex flex-col border rounded-md border-slate-200 border-solid items-start">
    <img src={icon} className="w-auto h-9" />
    <div className="font-semibold mt-4">{provider}</div>
    <div className="text-xs mt-2">{description}</div>
    <div
      onClick={() => {
        window.location.href = to;
      }}
      className="border-solid font-semibold cursor-pointer hover:bg-slate-100 mt-6 px-4 py-2 border border-slate-300 rounded-md text-xs"
    >
      {cta}
    </div>
  </div>
);
```

## Generate the Embedded Link

To use the `IntegrationCard` component, we will need to generate the Embedded Link to provide as the `to` prop.
The Embedded Link lets customers securely connect their Provider account using Supaglue's Managed Authentication.

**applicationId**:

Obtain your Supaglue `applicationId` by visiting the [Management Portal](https://app.supaglue.io) and clicking on the upper left corner, then "Copy ID".

<ThemedImage
  alt="application id"
  width="50%"
  sources={{
    light: '/img/application-id.png',
    dark: '/img/application-id.png',
  }}
/>

**customerId**: Your application's customer id.

**providerName**: View the list of provider names [here](../platform/managed-auth#link-format).

**returnUrl**: You likely want your customers to return to your application after authenticating.

```jsx
// SettingsPage.jsx

// applicationId: 8473e5ad-ffe7-45db-bbfd-ebc638f5f8c9
// customerId: 001
// providerName: salesforce
// returnUrl: https://supaglue.com

<IntegrationCard
  icon="/img/salesforce.svg"
  provider="Salesforce"
  description="Sync your leads in and out of Salesforce"
  to="https://api.supaglue.io/oauth/connect?applicationId=8473e5ad-ffe7-45db-bbfd-ebc638f5f8c9&customerId=001&providerName=saleforce&returnUrl=https://supaglue.com"
/>
```

## Checking for an existing connection

In the example above, we display "Connect" as the CTA. To check for existing connections to show a different CTA, such as "Disconnect" or "Reconnect" call the [Connections Management API](../api/v2/mgmt/get-connections) in a Nextjs [Server Component](https://nextjs.org/docs/getting-started/react-essentials#server-components).

:::info
You will need a Supaglue API key to call the Management API. You can obtain one by following [these steps](../api/introduction#api-authentication).
:::

```jsx
// fetch_active_connections.jsx

export async function fetchActiveConnection(providerName) {
  const connections = await fetch(`https://api.supaglue.io/mgmt/v2/customers/${CUSTOMER_ID}/connections`, {
    headers: {
      'Content-Type': 'application/json',
      'x-api-key': process.env.NEXT_PUBLIC_SUPAGLUE_API_KEY,
    },
  });
  const activeConnection = connections.find((connection) => connection.provider_name === providerName);

  return activeConnection;
}
```

Use `activeConnection` when using `IntegrationCard`:

```jsx
<IntegrationCard
  icon="/img/salesforce.svg"
  provider="Salesforce"
  description="Sync your leads in and out of Salesforce"
  to="https://api.supaglue.io/oauth/connect?applicationId=8473e5ad-ffe7-45db-bbfd-ebc638f5f8c9&customerId=001&providerName=saleforce&returnUrl=https://supaglue.com"
  cta={activeConnection ? 'Connect' : 'Reconnect'}
/>
```

<IntegrationCard
  icon="/img/salesforce.svg"
  provider="Salesforce"
  description="Sync your leads in and out of Salesforce"
  to="#"
  cta="Reconnect"
/>
