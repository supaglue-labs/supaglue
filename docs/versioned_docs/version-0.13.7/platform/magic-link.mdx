import BrowserWindow from '@site/src/components/BrowserWindow';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Magic Links

Supaglue's Magic Link is a shareable URL that allows your customers to create a connection to your application without having to write any frontend code.

<BrowserWindow url="https://app.supaglue.io/links/bec0250e-6b50-4853-a785-c133232dacfa">

![image](/img/magic-link-diagram.png)

</BrowserWindow>

## Generating a Magic Link

A Magic Link can be created in one of two ways:

- From the Supaglue Management UI
- Programatically via Management API

### Management UI

You can create a Magic Link by:

1. Navigating to the Customers page

2. Finding the customer you want to create the Magic Link for, and clicking on the Magic Link column

3. Filling out the relevant information, including provider, return url, and expiration.

<BrowserWindow url="https://app.supaglue.io/application/62605dc1-148e-4c53-a850-82e10f71ed23/customers">

![image](/img/magic-link-create.png)

</BrowserWindow>

### Management API

Supaglue also offers the ability to create Magic Links via our Management API.

You can do so by making a POST request to the [/magic_links](../api/v2/mgmt/create-magic-link) endpoint. You will have to specify the:

<Tabs>

<TabItem value="supaglue-cloud" label="Supaglue Cloud" default>

```
curl --location 'https://api.supaglue.io/mgmt/v2/magic_links' \
--header 'Content-Type: application/json' \
--header 'x-api-key: {{API_KEY}}' \
--data '{
    "customer_id": "{{CUSTOMER_ID}}",
    "provider_name": "{{PROVIDER_NAME}}",
    "return_url": "{{RETURN_URL}}",
    "expiration_secs": {{EXPIRATION_SECS}}
}'
```

</TabItem>

<TabItem value="localhost" label="Localhost" default>

```
curl --location 'http://localhost:8080/mgmt/v2/magic_links' \
--header 'Content-Type: application/json' \
--header 'x-api-key: {{API_KEY}}' \
--data '{
    "customer_id": "{{CUSTOMER_ID}}",
    "provider_name": "{{PROVIDER_NAME}}",
    "return_url": "{{RETURN_URL}}",
    "expiration_secs": {{EXPIRATION_SECS}}
}'
```

</TabItem>

</Tabs>

- API_KEY: Your Supaglue API key as generated from the API Key tab
- CUSTOMER_ID: `1234` (your customer's unique identifier)
- PROVIDER_NAME: e.g. `hubspot` or `salesforce`
- RETURN_URL: URL to redirect to after the connection is authorized
- EXPIRATION_SECS: The number of seconds after which the magic link will expire and become invalid.

## Consuming the Magic Link

Once your customer navigates to the Magic Link, they will have the opportunity to go through the Authentication flow for that provider. In many cases, this will be identical to the standard OAuth flow as documented in [Embedded Links](../platform/managed-auth#embedded-link).

For some providers, customers will have to provide additional information to complete the authentication flow, e.g.:

- the Instance URL (for Microsoft Dynamics 365)
- the API Key (for Apollo, which does not support OAuth)
- whether to connect to Sandbox or Production environment (for Salesforce)
- etc.

:::info
A Magic Link can only be consumed once, after which the Magic Link will be considered invalid.
:::
